<h1>My Profile</h1>

<p>
  <strong>First name:</strong>
  <%= current_user.first_name %>
</p>

<p>
  <strong>Last name:</strong>
  <%= current_user.last_name %>
</p>

<p>
  <strong>Nickname:</strong>
  <%= current_user.nickname %>
</p>

<p>
  <strong>Email:</strong>
  <%= current_user.email %>
</p>

<p>
  <strong>Phone number:</strong>
  <%= current_user.phone_number %>
</p>

<% if current_user.profile_image.attached? %>
  <p>
    <strong>Profile Image:</strong><br />
    <%= image_tag current_user.profile_image.variant(resize: '200x200') %>
  </p>
<% elsif current_user.profile_image_url.present? %>
  <p>
    <strong>Profile Image:</strong><br />
    <%= image_tag current_user.profile_image_url, size: '200x200' %>
  </p>
<% end %>

<!-- Link to My Snippets -->
<%= link_to 'My Snippets', my_snippets_path, class: "btn btn-primary" %>

<!-- Link to My Favorite Snippets -->
<%= link_to 'My Favorite Snippets', favorite_snippets_path, class: "btn btn-primary" %>

<%= link_to 'Edit Profile', edit_profile_path %>
<%= link_to 'Back to Dashboard', authenticated_root_path, class: 'back-link' %>
<% if @user %>
  <%= link_to 'Leave Feedback', leave_feedback_user_path(@user), class: 'btn btn-primary' %>
<% else %>
  <p>User not found or not specified.</p>
<% end %>



<h2>Feedback on My Snippets</h2>
<% if @snippets.any? %>
  <ul>
    <% @snippets.each do |snippet| %>
      <li>
        <p><strong>Snippet:</strong> <%= link_to snippet.title, snippet_path(snippet) %></p>
        <% if snippet.feedbacks.any? %>
          <ul>
            <% snippet.feedbacks.each do |feedback| %>
              <li>
                <p><strong>Feedback:</strong> <%= feedback.content %></p>
                <p><strong>From:</strong> <%= feedback.user.first_name %> <%= feedback.user.last_name %></p>
                 <%= link_to 'Delete Feedback', destroy_feedback_snippet_path(snippet, feedback), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
              </li>
            <% end %>
          </ul>
        <% else %>
          <p>No feedback yet.</p>
        <% end %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No snippets created yet.</p>
<% end %>
