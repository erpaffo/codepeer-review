<h1><%= @project.title %></h1>

<p><%= @project.description %></p>

<div id="favorite-button">
  <% if current_user.favorites.exists?(project: @project) %>
    <%= button_to 'Remove from Favorites', toggle_favorite_project_path(@project), method: :post, remote: true, class: "btn btn-danger" %>
  <% else %>
    <%= button_to 'Add to Favorites', toggle_favorite_project_path(@project), method: :post, remote: true, class: "btn btn-primary" %>
  <% end %>
</div>

<h3>Files</h3>
<ul>
  <% @project.project_files.each do |file| %>
    <li>
      <%= link_to file.file_identifier, show_file_project_path(@project, file_id: file.id) %>
    </li>
  <% end %>
</ul>

<%= link_to 'Edit', edit_project_path(@project), class: "btn btn-secondary" %>
<%= link_to 'Back to Projects', projects_path, class: "btn btn-primary" %>
<%= link_to 'Create File', new_file_project_path(@project), class: "btn btn-success" %>

<h2>Snippets</h2>
<ul>
  <% @project.project_files.each do |file| %>
    <% file.snippets.each do |snippet| %>
      <li>
        <%= link_to snippet.content.truncate(50), project_project_file_snippet_path(@project, file, snippet) %>
      </li>
    <% end %>
  <% end %>
</ul>
<%= link_to 'View Commit Logs', commit_logs_project_path(@project), class: 'btn btn-primary' %>
